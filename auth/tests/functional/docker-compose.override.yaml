version: '3'
services:
  auth:
    environment:
      UVICORN_RELOAD: 1
      DEBUG: 1
      TRACE_SAMPLING_FREQUENCY: 1
    volumes:
      - ../../src:/app
    ports:
      - "5000:5000"
    command: bash -c "/wait && flask db upgrade && python3 create_superuser.py && python3 main.py"

  tests:
    volumes:
      - ./:/app
